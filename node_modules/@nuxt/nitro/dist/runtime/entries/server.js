"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
module.exports = void 0;

require("#polyfill");

var _http = require("http");

var _https = require("https");

var _destr = _interopRequireDefault(require("destr"));

var _server = require("../server");

var _paths = require("#paths");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const cert = process.env.NITRO_SSL_CERT;
const key = process.env.NITRO_SSL_KEY;
const server = cert && key ? new _https.Server({
  key,
  cert
}, _server.handle) : new _http.Server(_server.handle);
const port = (0, _destr.default)(process.env.NUXT_PORT || process.env.PORT) || 3e3;
const hostname = process.env.NUXT_HOST || process.env.HOST || "localhost";
server.listen(port, hostname, err => {
  if (err) {
    console.error(err);
    process.exit(1);
  }

  const protocol = cert && key ? "https" : "http";
  console.log(`Listening on ${protocol}://${hostname}:${port}${(0, _paths.baseURL)()}`);
});
var _default = {};
module.exports = _default;