"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.handler = handler;

require("#polyfill");

var _ufo = require("ufo");

var _server = require("../server");

async function handler(event, context) {
  const r = await (0, _server.localCall)({
    event,
    url: (0, _ufo.withQuery)(event.path, event.queryStringParameters),
    context,
    headers: event.headers,
    method: event.httpMethod,
    query: event.queryStringParameters,
    body: event.body
  });
  return {
    statusCode: r.status,
    headers: r.headers,
    body: r.body.toString()
  };
}