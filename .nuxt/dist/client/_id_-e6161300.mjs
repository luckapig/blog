import{_ as b,c as d,a as r,n as m,w as v,v as x,b as k,t as g,d as T,m as y,p as C,e as M,f as L,o as i}from"./bootstrap-b9dab7bb.mjs";import{u as A,a as S,b as P}from"./states-73e9eaab.mjs";import{a as p}from"./index-982ea3c4.mjs";const B={name:"[id]",data(){return{content:"",contentType:"txt",settings:{},files:[],password:!1,statusCode:200,myPassword:"",borderColor:"border-green-500",blurLevel:"blur-2"}},beforeMount(){this.loadArticle("")},methods:{loadArticle(){this.isLoading=!0,this.headMessage="",this.errorMessage="";const l=this.$route.params.id,s=this.myPassword,c=e=>this.content=e,h=e=>{if(this.contentType=e,this.contentType==="redirect"&&(window.location.href=this.content),e==="md"||e==="markdown"||e==="html"){(e==="md"||e==="markdown")&&(this.content=y.parse(this.content));for(const n of this.files)this.content=this.content.replaceAll('src="'+n.name,'src="'+n.url),this.content=this.content.replaceAll('src="./'+n.name,'src="./'+n.url),this.content=this.content.replaceAll('href="'+n.name,'href="'+n.url),this.content=this.content.replaceAll('href="./'+n.name,'href="./'+n.url)}},t=e=>this.settings=e,o=e=>this.files=e,a=()=>{this.password=!0,this.myPassword!==""&&(this.borderColor="border-red-500")},w=()=>this.password=!1,_=e=>{this.statusCode=e,e!==200&&(this.errorMessage=e)},f=[!1,!1],u=e=>{f[e]=!0,f[0]&&f[1]&&(this.isLoading=!1)};p.get("/api/article",{params:{id:l,password:s}}).then(e=>{if(e.data.password)u(1),a();else{if(w(),t(e.data.settings),o(e.data.files),e.data.contentUrl===""){c("\u6587\u4EF6\u7F3A\u5931\uFF0C\u8BF7\u7B49\u5F85\u540C\u6B65"),u(1);return}p.get(e.data.contentUrl).then(n=>{c(n.data),h(e.data.contentType)}).catch(n=>{_(n.response.status)}).finally(()=>{u(1)})}}).catch(e=>{_(e.response.status)}).finally(()=>{u(0)})},onFocus(){this.blurLevel="blur-1"},onBlur(){this.blurLevel="blur-4"}}},j=Object.assign(B,{setup(l,{expose:s}){s();const c=A(),h=S(),t=P(),o={isLoading:c,headMessage:h,errorMessage:t,axios:p,marked:y};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}}),F=l=>(C("data-v-aafd3df8"),l=l(),M(),l),I={class:"border-3 border-green-500 border-dashed rounded-lg p-2"},N={key:0},V=F(()=>r("div",{class:"text-3xl text-green-800 dark:text-green-100"},"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF1A",-1)),H={class:"flex-col my-4"},U={class:"flex justify-center"},D={key:1},E={key:0},K=["srcdoc"],O={key:1},z=["innerHTML"],q={key:2},G=["textContent"],J={key:3},Q=["src"],R={key:4},W={class:"dark:text-green-100",style:{"white-space":"pre-wrap","text-align":"center"}},X=L(" \u5373\u5C06\u8DF3\u8F6C\u81F3 "),Y={class:"text-green-800 dark:text-green-100"};function Z(l,s,c,h,t,o){return i(),d("div",I,[t.password?(i(),d("div",N,[V,r("div",H,[r("div",U,[r("div",{class:m(["border-3 border-dashed rounded-md w-md",t.borderColor])},[r("div",{class:m(["filter",t.blurLevel])},[v(r("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>t.myPassword=a),class:"w-full text-center dark:bg-dark dark:text-green-100",style:{outline:"none"},onKeyup:s[1]||(s[1]=k((...a)=>o.loadArticle&&o.loadArticle(...a),["enter"])),onFocus:s[2]||(s[2]=(...a)=>o.onFocus&&o.onFocus(...a)),onBlur:s[3]||(s[3]=(...a)=>o.onBlur&&o.onBlur(...a))},null,544),[[x,t.myPassword]])],2)],2),r("button",{class:"w-8 h-8 ml-4 text-2xl text-red-600",onClick:s[4]||(s[4]=(...a)=>o.loadArticle&&o.loadArticle(...a))},"\u2611")])])])):(i(),d("div",D,[t.contentType==="html"?(i(),d("div",E,[r("iframe",{class:"w-full",style:{height:"calc(100vh - 8.5rem)"},srcdoc:t.content},null,8,K)])):t.contentType==="md"||t.contentType==="markdown"?(i(),d("div",O,[r("div",{class:"dark:text-green-100 dark:bg-dark markdown-body w-full",innerHTML:t.content},null,8,z)])):t.contentType==="txt"?(i(),d("div",q,[r("div",{class:"dark:text-green-100",style:{"white-space":"pre-wrap"},textContent:g(t.content)},null,8,G)])):t.contentType==="url"?(i(),d("div",J,[r("iframe",{class:"w-full",style:{height:"calc(100vh - 8.5rem)"},src:t.content},null,8,Q)])):t.contentType==="redirect"?(i(),d("div",R,[r("div",W,[X,r("span",Y,g(t.content),1)])])):T("",!0)]))])}var se=b(j,[["render",Z],["__scopeId","data-v-aafd3df8"]]);export{se as default};
