import{_ as h,c as l,a as o,t as g,F as x,r as f,d as _,i as b,o as c,k as m,l as p}from"./bootstrap-b9dab7bb.mjs";import{u as S,a as y,c as k,d as v,b as C}from"./states-73e9eaab.mjs";import{a as u}from"./index-982ea3c4.mjs";const P={name:"index",data(){return{article:[],defaultSettings:{saying:"\u5168\u90E8\u6587\u7AE0\uFF1A",desc:!0,button:"\u70B9\u51FB\u9605\u8BFB",pageNum:10},statusCode:200,nowPage:1}},mounted(){this.getArticle(1)},methods:{getArticle(s){this.isLoading=!0,this.headMessage="",this.errorMessage="";const t=e=>{this.article=e,this.sortArticle()},a=e=>{this.blogSettings=e,this.storeBlogSettings=!0},d=[!1,!1],r=e=>{d[e]=!0,d[0]&&d[1]&&(this.isLoading=!1)},n=e=>{this.statusCode=e,e!==200&&(this.errorMessage=e)};u.get("/api/index",{params:{page:s}}).then(async e=>{s===1?await u.get(e.data.settingsUrl).then(i=>{a(i.data)}).catch(i=>{n(i.response.status)}).finally(()=>{r(1)}):r(1),t(e.data.article)}).catch(e=>{n(e.response.status)}).finally(()=>{r(0)})},sortArticle(){let s=0;for(const t of this.article){const a=Number(t.dirName.substring(0,t.dirName.indexOf("-")));typeof a=="number"&&!isNaN(a)&&(this.article[s].index=a,this.article[s].title=t.dirName.substring(t.dirName.indexOf("-")+1),this.article[s].updateDate=this.article[s].updateDate.substring(0,this.article[s].updateDate.indexOf("T")),s=s+1)}this.getConfig("desc")?this.article.sort((t,a)=>a.index-t.index):this.article.sort((t,a)=>t.index-a.index)},getConfig(s){return this.blogSettings!==void 0&&this.blogSettings[s]!==void 0?this.blogSettings[s]:this.defaultSettings[s]},prePage(){this.nowPage>1&&(this.nowPage--,this.getArticle(this.nowPage))},nextPage(){this.article.length===this.blogSettings.pageNum&&(this.nowPage++,this.getArticle(this.nowPage))}}},w=Object.assign(P,{setup(s,{expose:t}){t();const a=S(),d=y(),r=k(),n=v(),e=C(),i={isLoading:a,headMessage:d,blogSettings:r,storeBlogSettings:n,errorMessage:e,axios:u};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}}),N={key:0},M={class:"text-4xl text-green-500 font-bold"},j={class:"flex-col justify-between h-auto w-full mx-auto my-4 p-4 border-3 border-green-500 border-dashed rounded-lg"},B={class:"text-2xl dark:text-green-100"},A={class:"text-md text-gray-500 dark:text-green-100"},D={class:"flex w-full justify-end"},L={class:"bg-green-100 dark:bg-green-900 dark:text-green-100 p-1 border-3 border-green-500 border-dashed rounded-lg text-green-800 font-bold"},O={key:0},V={class:"text-center"},E={class:"text-md text-gray-500 dark:text-green-100 px-2 border-3 border-green-500 border-dashed rounded-lg"},F={key:1},H={class:"text-4xl"};function T(s,t,a,d,r,n){const e=b("nuxt-link");return c(),l("div",null,[r.statusCode===200?(c(),l("div",N,[o("div",M,g(n.getConfig("saying")),1),(c(!0),l(x,null,f(r.article,i=>(c(),l("div",{key:i.index},[o("div",j,[o("div",B,g(i.title),1),o("div",A,g(i.updateDate),1),o("div",D,[m(e,{to:"/article/"+i.id},{default:p(()=>[o("div",L,g(n.getConfig("button")),1)]),_:2},1032,["to"])])])]))),128)),r.article.length===0?(c(),l("div",O," \u7A7A ")):_("",!0),o("div",V,[o("button",{class:"text-2xl",onClick:t[0]||(t[0]=(...i)=>n.prePage&&n.prePage(...i))},"\u2B05\uFE0F"),o("span",E,g(r.nowPage),1),o("button",{class:"text-2xl",onClick:t[1]||(t[1]=(...i)=>n.nextPage&&n.nextPage(...i))},"\u27A1\uFE0F")])])):(c(),l("div",F,[o("div",H,g(r.statusCode),1)]))])}var G=h(w,[["render",T]]);export{G as default};
